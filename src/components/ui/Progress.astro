---
interface Props {
  value?: number | string;
  max?: number | string;
  class?: string;
  label?: string;
}

const {
  value = 0,
  max = 100,
  class: className = '',
  label
} = Astro.props as Props;

const v = typeof value === 'string' ? parseFloat(value) : value;
const m = typeof max === 'string' ? parseFloat(max) : max;
const pct = Math.round(Math.max(0, Math.min(100, (v / m) * 100)));
---

<div class={`progress ${className}`} role="progressbar" aria-valuemin="0" aria-valuemax={String(m)} aria-valuenow={String(v)} aria-label={label ?? `${pct}%`}>
  <div class="progress-track">
    <div class="progress-bar" style={`width: ${pct}%`} />
  </div>
</div>

<style>
.progress-track {
  background: var(--color-surface-muted);
  border-radius: var(--radius-md);
  height: var(--space-2);
  overflow: hidden;
}
.progress-bar {
  background: var(--color-link-primary);
  height: 100%;
  width: 0%;
  transition: width var(--motion-duration-medium) ease;
}
@media (prefers-reduced-motion: reduce) {
  .progress-bar { transition: none; }
}
</style>